<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C4UAUA | Car 4 Ukraine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link rel="icon" href="https://raw.githubusercontent.com/ryjones/c4uaua/main/favicon.ico">
</head>
<body class="bg-slate-50 text-slate-900 font-sans">

    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center space-x-2">
                <div class="w-8 h-8 rounded bg-blue-600 flex items-center justify-center text-white font-bold text-xs">C4U</div>
                <span class="font-bold text-xl tracking-tight">Car 4 Ukraine</span>
            </div>
            <div class="hidden md:flex space-x-8 font-medium text-slate-600">
                <a href="#data" class="hover:text-blue-600 transition">Team Data</a>
            </div>
            <a href="https://github.com/ryjones/c4uaua" class="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-slate-800 transition">
                View on GitHub
            </a>
        </div>
    </nav>

<header class="hero-pattern py-20 text-white bg-blue-600">
    <div class="max-w-4xl mx-auto px-4 text-center">
        <h1 class="text-5xl md:text-7xl font-extrabold mb-6">Car 4 Ukraine</h1>
    </div>
</header>

    <section id="data" class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <div class="mb-12">
                <h2 class="text-3xl font-bold mb-2">Logistics & Team Data</h2>
                <p class="text-slate-600">Real-time data parsed directly from the repository's CSV records.</p>
            </div>

            <div id="csv-tables-container" class="space-y-12">
                <div class="flex items-center justify-center py-10">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
                    <span class="ml-3 text-slate-500">Loading team data...</span>
                </div>
            </div>
        </div>
    </section>


    <footer class="bg-slate-900 text-slate-400 py-12 text-center">
        <a href="https://github.com/ryjones/c4uaua" class="text-sm hover:text-white transition">Repository Source</a>
    </footer>

    <script>
        // List of CSV files in your repo
        const csvFiles = ['top_10_donors.csv', 'battalion_stats.csv', 'normalized_donations.csv'];
        const baseUrl = 'https://raw.githubusercontent.com/ryjones/c4uaua/main/';
        const container = document.getElementById('csv-tables-container');

        async function loadCSVs() {
            container.innerHTML = ''; // Clear loader

            for (const file of csvFiles) {
                try {
                    const response = await fetch(baseUrl + file);
                    const csvText = await response.text();
                    
                    Papa.parse(csvText, {
                        header: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            renderTable(file, results.data, results.meta.fields);
                        }
                    });
                } catch (error) {
                    console.error(`Error loading ${file}:`, error);
                }
            }
        }

        function renderTable(filename, data, headers) {
            const wrapper = document.createElement('div');
            wrapper.className = "mb-10";
            
            // Clean up filename for title (e.g., "6.csv" -> "Team 6")
            const title = filename.replace('.csv', '');
            
            let tableHtml = `
                <div class="flex items-center mb-4">
                    <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-bold mr-3">Unit ${title}</span>
                    <h3 class="text-xl font-bold text-slate-800">Deployment Record</h3>
                </div>
                <div class="overflow-x-auto rounded-lg border border-slate-200 shadow-sm">
                    <table class="min-w-full divide-y divide-slate-200">
                        <thead class="bg-slate-50">
                            <tr>
                                ${headers.map(h => `<th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">${h}</th>`).join('')}
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-slate-200">
                            ${data.map(row => `
                                <tr class="hover:bg-blue-50/50 transition">
                                    ${headers.map(h => `<td class="px-6 py-4 text-sm text-slate-600 whitespace-nowrap">${row[h] || ''}</td>`).join('')}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            
            wrapper.innerHTML = tableHtml;
            container.appendChild(wrapper);
        }

        window.addEventListener('DOMContentLoaded', loadCSVs);
    </script>
</body>
</html>
